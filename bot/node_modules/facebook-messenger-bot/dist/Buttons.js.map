{"version":3,"sources":["../src/Buttons.js"],"names":["Buttons","_buttons","text","data","url","phone","event","share","account_linking","Error","push","buttons","button","linking","type","title","payload","length","array","forEach","add","arg"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;IAAMA,O;AACJ,qBAAc;AAAA;;AACZ,SAAKC,QAAL,GAAgB,EAAhB;AACD;;;;8BAE4D;AAAA,UAAxDC,IAAwD,QAAxDA,IAAwD;AAAA,UAAlDC,IAAkD,QAAlDA,IAAkD;AAAA,UAA5CC,GAA4C,QAA5CA,GAA4C;AAAA,UAAvCC,KAAuC,QAAvCA,KAAuC;AAAA,UAAhCC,KAAgC,QAAhCA,KAAgC;AAAA,UAAzBC,KAAyB,QAAzBA,KAAyB;AAAA,UAAlBC,eAAkB,QAAlBA,eAAkB;;AAC3D,UAAI,CAACL,IAAD,IAAS,CAACC,GAAV,IAAiB,CAACE,KAAlB,IAA2B,CAACD,KAA5B,IAAqC,CAACE,KAA1C,EAAiD;AAC/C,cAAME,MAAM,iFAAN,CAAN;AACD;;AAED,WAAKR,QAAL,CAAcS,IAAd,CAAmB,EAACR,MAAMA,QAAQ,QAAf,EAAyBI,YAAzB,EAAgCH,UAAhC,EAAsCE,YAAtC,EAA6CE,YAA7C,EAAoDH,QAApD,EAAyDI,gCAAzD,EAAnB;AACA,aAAO,IAAP;AACD;;;6BAEQ;AACP,UAAMG,UAAU,EAAhB;AADO;AAAA;AAAA;;AAAA;AAEP,wDAAqB,KAAKV,QAA1B,4GAAoC;AAAA,cAAzBW,MAAyB;;AAClC,cAAIA,OAAOJ,eAAX,EAA4B;AAC1B,gBAAI,CAACI,OAAOJ,eAAP,CAAuBK,OAA5B,EAAqC;AACnCF,sBAAQD,IAAR,CAAa,EAACI,MAAM,gBAAP,EAAb;AACD,aAFD,MAEO,IAAIF,OAAOR,GAAX,EAAgB;AACrBO,sBAAQD,IAAR,CAAa,EAACI,MAAM,cAAP,EAAuBV,KAAKQ,OAAOR,GAAnC,EAAb;AACD,aAFM,MAEA;AACL,oBAAMK,MAAM,iCAAN,CAAN;AACD;AACF,WARD,MAQO,IAAIG,OAAOR,GAAX,EAAgB;AACrBO,oBAAQD,IAAR,CAAa,EAACI,MAAM,SAAP,EAAkBV,KAAKQ,OAAOR,GAA9B,EAAmCW,OAAOH,OAAOV,IAAjD,EAAb;AACD,WAFM,MAEA,IAAIU,OAAOT,IAAP,IAAe,IAAnB,EAAyB;AAC9B,gBAAMa,UAAU,yBAAe,EAACb,MAAMS,OAAOT,IAAd,EAAoBG,OAAOM,OAAON,KAAlC,EAAf,CAAhB;AACAK,oBAAQD,IAAR,CAAa,EAACI,MAAM,UAAP,EAAmBE,gBAAnB,EAA4BD,OAAOH,OAAOV,IAA1C,EAAb;AACD,WAHM,MAGA,IAAIU,OAAOL,KAAX,EAAkB;AACvBI,oBAAQD,IAAR,CAAa,EAACI,MAAM,eAAP,EAAb;AACD,WAFM,MAEA,IAAIF,OAAOP,KAAX,EAAkB;AACvBM,oBAAQD,IAAR,CAAa,EAACI,MAAM,cAAP,EAAuBE,SAASJ,OAAOP,KAAvC,EAA8CU,OAAOH,OAAOV,IAA5D,EAAb;AACD;AACF;AArBM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAuBP,aAAOS,OAAP;AACD;;;wBAQY;AACX,aAAO,KAAKV,QAAL,CAAcgB,MAArB;AACD;;;yBARWC,K,EAAO;AACjB,UAAMP,UAAU,IAAIX,OAAJ,EAAhB;AACAkB,YAAMC,OAAN,CAAc;AAAA,eAAOR,QAAQS,GAAR,CAAYC,GAAZ,CAAP;AAAA,OAAd;AACA,aAAOV,OAAP;AACD;;;;;kBAOYX,O","file":"Buttons.js","sourcesContent":["class Buttons {\n  constructor() {\n    this._buttons = [];\n  }\n\n  add({text, data, url, phone, event, share, account_linking}) {\n    if (!data && !url && !event && !phone && !share) {\n      throw Error('Must provide a url or data i.e. {data: null} or {url: \\'https://facebook.com\\'}');\n    }\n\n    this._buttons.push({text: text || 'Button', event, data, phone, share, url, account_linking});\n    return this;\n  }\n\n  toJSON() {\n    const buttons = [];\n    for (const button of this._buttons) {\n      if (button.account_linking) {\n        if (!button.account_linking.linking) {\n          buttons.push({type: 'account_unlink'});\n        } else if (button.url) {\n          buttons.push({type: 'account_link', url: button.url});\n        } else {\n          throw Error('Missing url for account linking');\n        }\n      } else if (button.url) {\n        buttons.push({type: 'web_url', url: button.url, title: button.text});\n      } else if (button.data != null) {\n        const payload = JSON.stringify({data: button.data, event: button.event});\n        buttons.push({type: 'postback', payload, title: button.text});\n      } else if (button.share) {\n        buttons.push({type: 'element_share'});\n      } else if (button.phone) {\n        buttons.push({type: 'phone_number', payload: button.phone, title: button.text});\n      }\n    }\n\n    return buttons;\n  }\n\n  static from(array) {\n    const buttons = new Buttons();\n    array.forEach(arg => buttons.add(arg));\n    return buttons;\n  }\n\n  get length() {\n    return this._buttons.length;\n  }\n}\n\nexport default Buttons;\n"]}